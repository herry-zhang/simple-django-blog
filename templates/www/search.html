{% extends 'base.html' %}
{% block title %}搜索{% endblock %}
{% block main %}
    <div class="container">
        <div class="max-width-40">
            <form class="form-horizontal" action="" method="GET" role="search">
                <div class="input-group">
                    <input name="search" type="text" class="form-control" placeholder="搜索收集/文章"/>
                    <span class="input-group-btn">
                                <button type="submit" class="btn btn-default">搜索</button>
                            </span>
                </div>
            </form>
        </div>
        </br>
        {% if result %}
            {% for post in post_list %}
                <blockquote>
                    <div class="blog-post">
                        <h3 class="blog-post-title"><a href="{% url "article_detail" id=post.id %}"
                                                       itemprop="url">{{ post.title }}</a></h3>
                        <p class="blog-post-meta">
                            Date:{{ post.date_time | date:"Y-m-d" }}<strong> | </strong>By:{{ post.author }}
                            <strong> | </strong>Tag:<a
                                href="">{{ post.category }}</a>
                        </p>
                        <p>{{ post.content | truncatechars_html:100 }}</p>
                        <p>{{ post.describe }}</p>
                    </div>
                </blockquote>
            {% empty %}
                <div class="text-center"><p>没有找到你想要的内容。</p></div>
            {% endfor %}
        {% endif %}
        <nav id="pagenavi">
            {% if post_list.has_previous %}
                <a href="?p={{ post_list.previous_page_number }}" class="prev">上一页</a>
            {% endif %}
            {% if first_page %}
                <a href="?p=1">1</a>...
            {% endif %}
            {% for page in page_num %}
                {% ifequal current_page page %}
                    <span>{{ current_page }}</span>
                {% else %}
                    <a href="?p={{ page }}">{{ page }}</a>
                {% endifequal %}
            {% endfor %}

            {% if lastpage %}
                ...<a href="?p={{ last_page }}">{{ last_page }}</a>
            {% endif %}
            {% if post_list.has_next %}
                <a href="?p={{ post_list.next_page_number }}" class="next">下一页</a>
            {% endif %}
        </nav>
    </div>
{% endblock %}